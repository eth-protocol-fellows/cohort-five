"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MultiTablePrettyfier = void 0;
var document_1 = require("../models/doc/document");
var MultiTablePrettyfier = /** @class */ (function () {
    function MultiTablePrettyfier(_tableFinder, _singleTablePrettyfier, _sizeLimitChecker) {
        this._tableFinder = _tableFinder;
        this._singleTablePrettyfier = _singleTablePrettyfier;
        this._sizeLimitChecker = _sizeLimitChecker;
    }
    MultiTablePrettyfier.prototype.formatTables = function (input) {
        if (!this._sizeLimitChecker.isWithinAllowedSizeLimit(input)) {
            return input;
        }
        var document = new document_1.Document(input);
        var tableRange = null;
        var tableSearchStartLine = 0;
        while ((tableRange = this._tableFinder.getNextRange(document, tableSearchStartLine)) != null) {
            var formattedTable = this._singleTablePrettyfier.prettifyTable(document, tableRange);
            document.replaceTextInRange(tableRange, formattedTable);
            tableSearchStartLine = tableRange.endLine + 1;
        }
        return document.getText();
    };
    return MultiTablePrettyfier;
}());
exports.MultiTablePrettyfier = MultiTablePrettyfier;
